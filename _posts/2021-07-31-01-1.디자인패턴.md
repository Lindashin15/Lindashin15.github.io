---
layout: post
title: [Head First]01-1.디자인패턴_Strategy pattern
tags: [Strategy pattern]
toc:  true
categories: [Strategy pattern]
---

## 1장. Strategy pattern
<hr/>

### 추상클래스와 인터페이스
추상클래스:
- is - a 관계
- 다중상속이 **불가하다**
- 추상메서드를 가지는 클래스 (+일반 메서드도 가능)
- 새로운 일반클래스(자식클래스)를 위한 부모클래스의 용도로만 사용
- 동일한 부모를 가지는 클래스를 **묶는 개념으로 상속받아서 ➡ 기능을 확장** 시키는 목적

인터페이스:
- has a
- 다중상속이 **가능하다**
- 추상메서드만 가지는 클래스
- 구현 객체가 같은 동작을 한다는것을 보장하는 목적이다.
- 부모클래스로 부터 유전자를 물려받는게 **아닌 ➡ 필요에 따라 결합하는 관계이다.**

### 상속
: 부모클래스를 자식클래스가 물려받아 사용한다. **즉 상속을 통해서 기능을 확장시킨다**

#### 문제1
![그림1](https://github.com/Lindashin15/Infomation/blob/cc9b61557be825c0e90a1b0fe431c642f694fac2/%E1%84%8B%E1%85%A8%E1%84%8C%E1%85%A6%20%E1%84%80%E1%85%B3%E1%84%85%E1%85%B5%E1%86%B71.png?raw=true)
- 기존 SimUDuck 애플리케이션의 부모클래스(Duck)에 **fly()** 메서드와 **RubberDuck** (서브클래스)를 추가한다.<br>
이때 RubberDuck클래스는 Duck클래스에 있는 fly()메서드와 quack()메서드와 다른 행동을 하므로 fly()메서드와 quack()메서드를 오버라이드해 변경 시켜줬다.

**문제발생!!! ➡ 코드 변경이 어려워 진다**

#### WHY??
1. fly()메서드가 추가 되면서 fly()에 다양한 행동이 존재한다.
ex) 날거나, 날지 못하거나 그외 etc..

2. quack()메서드 또한 RubberDuck클래스는 "꽥꽥"이 아닌 **"삑삑"** 으로 소리를 낸다. 즉 quack()메서드 또한 다양한 행동이 존재한다.
ex) 삑삑, 소리를 내지 않음 etc..

➡ 이때, 서브클래스에서 **코드가 중복되고** 만약 코드가 변경이 된다면 그에 해당하는 **서브클래스를 하나하나 찾아서 모두 변경** 해줘야한다. 이는 **유연성이 떨어진다.**

#### 문제2

- 조는 상속을 활용하는 것이 옳은 해법이 아닐지도 모른다는 것을 깨달음
WHY? 제품을 6개월 마다 갱신하기로 했으므로 규격이 계쏙 바뀔것임
➡ Duck의 서브클래스의 fly()와 quack()메소드를 일일이 살펴봐야 하고, 상황에 따라 오버라이드해야 한다. **이는 영원히 그런 일을 반복해야 된다.**

![그림2](https://github.com/Lindashin15/Infomation/blob/main/%E1%84%8B%E1%85%A8%E1%84%8C%E1%85%A6%20%E1%84%80%E1%85%B3%E1%84%85%E1%85%B5%E1%86%B72.png?raw=true)


- 조는 더 깔끔한 방법으로 fly()를 Duck 수퍼클래스에서 빼고 fly()메소드가 들어있는 Flyable 인터페이스로 만들어 날 수 있는 오리들에 대해서만 그 인터페이스를 구현해서 fly()메소드를 넣어 준다. 또한, 모든 오리들이 꽥꽥거리는 건 아니니까 Quackable이라는 인터페이스도 같이 만들어 줬다.

#### 이 디자인은 어떤가?
- 위 그림2의 방식으로 변경이 된다면 **코드의 재사용을 전혀 기대 할 수 없다.**

**WHY?** <br>
fly()에 다른 기능을 가지게 된다면 서브클래스에서 fly()를 재정의 해줘야한다. quack() 또한 "꽥꽥" 이외에 "삑삑" 등 다양한 소리 행동이 존재한다. 이렇게 된다면 **코드의 중복과 변경이 어려워** 진다.

### 디자인 원칙1
- 애플리케니션에서 **달라지는 부분** 을 찾아내고, 달라지지 않는 부분으로 부터 분리시킨다.
- 이때, 달라지는 부분(바뀌는 부분)은 따로 뽑아서 **캡슐화** 를 시킨다.
- 캡슐화를 하면, 나중에 바뀌지 않는 부분에는 영향을 미지치 않은 채로 **그 부분만 고치거나 확장** 할 수 있다.
