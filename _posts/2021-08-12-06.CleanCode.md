 ---
layout: post
title: Clean code_06.객체와 자료구조
tags: [Clean code]
toc:  true
categories: [Clean code]
---
## 6장 객체와 자료구조
> 변수를 비공개(private)로 정의하는 이유가 있다. 그렇다면 어째서 조화(get)함수와 설정(set)함수를 딩연하게 공개(public)해 비공개 변수를 외부에 노출할까?

<hr/>

### 자료추상화
: 구현을 감추어야 한다. 이 구현을 감추기 위해서는 추상화가 필요하다.
- 변수 사이에 함수라는 계층을 넣는다고 구현이 저절로 감춰지지는 않는다
- getter함수와 setter함수로 변수를 다룬다고 클래스가 되지는 않는다.
- 사용자가 **구현을 모른 채** 자료의 핵심을 조작할 수 이었어야 진정한 클래스이다.
- 자료를 세세하게 공개하기 보다는 **추상적인 개념** 으로 표현하는 편이 좋다.

### 자료/객체 비대칭
**객체는** 추상화 뒤로 **자료를 숨긴 채** 자료를 다루는 함수만 공개한다.<br>
**자료 구조는** 자료를 **그대로 공개** 하며 별다른 함수는 제공하지 않는다.
- 절차적인 코드는 기존 자료 구조를 변경하지 않으면서 **새 함수를 추가** 하기 쉽다.
- 객체 지향 코드는 기존 함수를 변경하지 않으면서 **새 클래스를 추가** 하기 쉽다.
> 절자적인 코드는 새로운 자료 구조를 추가시 모든 함수를 고쳐야 한다. 객체 지향 코드는 새로운 함수를 추가하기 위해 모든 클래스를 고쳐야 한다. 개발시 새로운 자료 타입이 필요한 경우가 생긴다. 이때는 클래스와 객체 지향 기법이 가장 적합하다. 반면, 새로운 함수가 필요한 경우도 생긴다. 이때는 절차적인 도트와 자료 구조가 더 적합하다

**➡** 때로 다순한 자료 구조와 절차적인 코드가 가장 적합한 상황도 있다.

### 디미터 법칙 (Heuristic)
: 모듈은 자식이 조작하는 객체의 속사정을 몰라야 한다. 즉, 객체는 조회 함수로 내부 구조를 공개하면 안된다.<br>
즉 **객체는 getter함수로 내부 구조를 공개하면 안 된다** 는 의미이다.
- 기차 충돌
  - 자료 구조는 무조건 함수 없이 공개 변수만 포함
  - 객체는 비공개 변수와 공개 함수를 포함
- 잡종 구조: 중요한 기능을 수행하는 함수도 있고, 공개 변수나 공개 조회/설정 함수도 있다.
공개 조회/설정 함수는 비공개 변수를 그대로 노출한다. 그러므로 잡종 구조는 피하는 편이 좋다.
- 구조체 감추기
: 객채로 만들어 감싸 내부 구조를 드러내지 않으며 모듈에서 해당 함수는 자신이 몰라야 하는 여러 객체를 탐색할 필요없이 만든다.

### 자료 전달 객체
자료 구조체: 전형적인 형태는 공개 변수만 있고 함수가 없는 클래스이다. 이는 때로 자료 전달 객체(DTO)라 한다.<br>
DTO는 유용한 구조체로 특히 데이터베이스와 통신하거나 소켓에서 받은 메시지의 구문을 분석할 때 유용하다.<br>
좀 더 일반적인 형태는 '빈(bean)'구조다. 빈은 비공개 변수를 조회/설정 함수로 조작한다.<br>
- 활성 레코드
: 공개 변수가 있거나 비공개 변수에 조회/설정 함수가 있는 자료구조로 대개 save나 find와 같은 탐색 함수도 제공한다.<br>
활성 레코드에 비즈니스 규칙 메서드를 추가하는건 바람직하지 않다.<br>
이는 자료 구조도 아니고 객체도 아닌 잡종 구조가 나오기 때문이다.<br>

#### 결론
객체는 동작을 공개하고 자료를 숨긴다. 그래서 기존 동적울 변경하지 않으면서 새 객체 타입을 추가하기는 쉬운 반면, 기존 객체에 새 동작을 추가하기는 어렵다.<br>
**➡** 시스템 구현시 새로운 자료 타입을 추가하는 유연성이 필요할때 객체가 더 적합.<br>
자료 구조는 별다른 동작 없이 자료를 노출한다. 그래서 기존 자료구조에 새 동작을 추가하기는 쉬우나, 기존 함수에 새 자료 구조를 추가하기는 어렵다.<br>
**➡** 시스템 구현시 새로운 동작을 추가하는 유연성이 필요하면 자료 구조와 절차적인 코드가 더 적합.
